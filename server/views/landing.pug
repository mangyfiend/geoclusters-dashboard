
doctype html
head
  meta(charset='UTF-8')
  meta(name='viewport' content='width=device-width, initial-scale=1.0')

  title #{title}

  //- MAPBOX GL V2.3.0
  link(href="https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css" rel="stylesheet")
  script(src="https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js")

  //- LEAFLET
  script(src='https://unpkg.com/leaflet@1.7.1/dist/leaflet.js' integrity='sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==' crossorigin='')
  link(rel='stylesheet' href='https://unpkg.com/leaflet@1.7.1/dist/leaflet.css' integrity='sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==' crossorigin='')

  //- LEAFLET BING MAPS
  script(src='/src/plugins/LeafletBingLayer/bing.js')

  //- FONT AWESOME
  link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous")

  //- FONTISTO
  link(rel='stylesheet' href='https://cdn.jsdelivr.net/npm/fontisto@v3.0.4/css/fontisto/fontisto.min.css')

  //- BOOTSTRAP 5
  link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css' rel='stylesheet' integrity='sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6' crossorigin='anonymous')

  //- MAIN STYLESHEET
  link(rel='stylesheet' href='/src/css/landing.css')

body

  block landing-page

    .floating-pane
      div 26 AGCS
      div 7,100 Farmers

    .main-pane-container

      .left-pane-content
        .left-pane-header
          .brand-logo
            img(src='./assets/icons/agronomy-two-tone.svg' alt='')
            // <img src="./assets/logos/nirsal-logo.png" alt="">
          .brand-name NIRSAL
          h1.brand-title
            div AGRO
            div GEO-CLUSTERS
            div PLATFORM
        .left-pane-body
          .card.card-body
            form(action='/dashboard' method='POST')
              .form-group
                label(for='email') Email
                input#email.form-control(type='email' name='email' placeholder='Enter Email')
                a(href="/dashboard") Dashboard
              //- .form-group
              //-   label(for='password') Password
              //-   input#password.form-control(type='password' name='password' placeholder='Enter Password')
              button.btn.btn-primary.btn-block(type='submit') Login
        .left-pane-footer
          p &copy; 
            script.
              document.write(new Date().getFullYear())
            span  NIRSAL PLC. All Rights Reserved.
          nav
            a(href='#') Terms
            a(href='#') Privacy
            a(href='#') Security

    #landing_page_map_cont

  //- jQuery CDN - Slim version (=without AJAX)
  script(src='https://code.jquery.com/jquery-3.3.1.slim.min.js' integrity='sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo' crossorigin='anonymous')

  //- Popper.JS FOR BOOTSTRAP
  script(src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js' integrity='sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ' crossorigin='anonymous')

  //- BOOTSTRAP 4
  script(src='https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js' integrity='sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm' crossorigin='anonymous')

  //- BOOTSTRAP 5
  script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js' integrity='sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf' crossorigin='anonymous')

  script(type='module').

    `use strict`
    import { MAPBOX_TOKEN, BING_MAPS_TOKEN } from "/src/js/maps-config.js";

    (function() {

      //- const LANDING_PAGE_MAP = L.map("landing_page_map", { zoomSnap: 0.01 })
      //-   .setView([36.8370066107919, 10.059871561852127], 15.5);

      //-   // BASEMAP BING MAPS TILE
      //-   const bingMapsTile = L.bingLayer(BING_MAPS_TOKEN, {
      //-     imagerySet: 'AerialWithLabels',
      //-     maxZoom: 28,
      //-     detectRetina: true,
      //-     retinaDpi: 'd2',
      //-     mapLayer: "TrafficFlow",
      //-     attribution: '&copy; FieldDev Group'
      //-   });

      //-   bingMapsTile.addTo(LANDING_PAGE_MAP);

      //- INIT. LANDING PAGE MAP
      mapboxgl.accessToken = `pk.eyJ1IjoibW9ub2xpdGhnb29uIiwiYSI6ImNrN3B1MnNjaDBhNTczcHFkdmJ0aHR6dWEifQ.O0mHuJ2wKNqKz3E_BIsnog`;
      const LANDING_PAGE_MAP = new mapboxgl.Map({
        attribution: `FieldDev Group`,
        container: `landing_page_map_cont`,
        style: `mapbox://styles/monolithgoon/ckqat05ss033418qmildmyau2`,
        center: [6.3, 7.9],
        pitch: 59,
        bearing: -2,
        zoom: 6.2,

        center: [10.30595, 12.65872],
        pitch: 68,
        bearing: -2,
        zoom: 11.88,
      });

      LANDING_PAGE_MAP.on(`load`, function() {

        LANDING_PAGE_MAP.addSource(`mapbox-dem`, {
            'type': 'raster-dem',
            'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',
            'tileSize': 512,
            'maxzoom': 14,
        });

        // FIXME > NOT WORKING
        // ADD THE DEM SOURCE AS A TERRAIN LAYER WITH EXAGGERATED HEIGHT
        LANDING_PAGE_MAP.setTerrain({"source": "mapbox-dem", "exaggeration": 30});

        // ADD A SKY LAYER THAT WILL SHOW WHEN THE MAP IS HIGHLY PITCHED
        LANDING_PAGE_MAP.addLayer({
            'id': 'sky', 
            'type': 'sky',
            'paint': {
              'sky-type': 'atmosphere',
              'sky-atmosphere-sun': [ 0.0, 0.0],
              'sky-atmosphere-sun-intensity': 15,
            } 
        });
      });


      //- ADD ZOOM & NAV. CONTROLS
      LANDING_PAGE_MAP.addControl(new mapboxgl.NavigationControl());


    })();